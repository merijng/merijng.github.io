<!doctype html><html lang=en><head><title>Substrings vs. Spans: Efficient String Handling in C# :: Merijn Geurts</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="If you’re working with strings in C#, you’ve probably encountered the need to extract substrings or manipulate portions of a string. Traditionally, you would use the Substring method to extract a portion of a string, but there&amp;rsquo;s a newer alternative called &amp;ldquo;spans&amp;rdquo; that you might want to consider.
In this article, we’ll take a look at the differences between substrings and spans in C#, and discuss how you can use each approach efficiently to handle strings in your code."><meta name=keywords content="Software engineer"><meta name=robots content="noodp"><link rel=canonical href=https://merijng.github.io/en/posts/substring-vs-spans-efficient-string-handling-in-csharp/><link rel=alternate hreflang=en href=https://merijng.github.io/en/posts/substring-vs-spans-efficient-string-handling-in-csharp/><link rel=alternate hreflang=nl href=https://merijng.github.io/posts/substring-vs-spans-efficient-string-handling-in-csharp/><link rel=alternate hreflang=x-default href=https://merijng.github.io/en/posts/substring-vs-spans-efficient-string-handling-in-csharp/><link rel=stylesheet href=https://merijng.github.io/styles.css><link rel="shortcut icon" href=https://merijng.github.io/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://merijng.github.io/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Substrings vs. Spans: Efficient String Handling in C#"><meta property="og:description" content="If you’re working with strings in C#, you’ve probably encountered the need to extract substrings or manipulate portions of a string. Traditionally, you would use the Substring method to extract a portion of a string, but there&amp;rsquo;s a newer alternative called &amp;ldquo;spans&amp;rdquo; that you might want to consider.
In this article, we’ll take a look at the differences between substrings and spans in C#, and discuss how you can use each approach efficiently to handle strings in your code."><meta property="og:url" content="https://merijng.github.io/en/posts/substring-vs-spans-efficient-string-handling-in-csharp/"><meta property="og:site_name" content="Merijn Geurts"><meta property="og:image" content="https://merijng.github.io/img/favicon/orange.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"></head><body class=orange><div class="container full"><header class=header><div class=header__inner><div class=header__logo><a href=/en><div class=logo>Merijn Geurts</div></a></div><ul class="menu menu--desktop menu--language-selector"><li class=menu__trigger>English&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://merijng.github.io/en/>English</a></li><li><a href=https://merijng.github.io/>Nederlands</a></li></ul></li></ul></div></header><div class=content><article class=post><h1 class=post-title><a href=https://merijng.github.io/en/posts/substring-vs-spans-efficient-string-handling-in-csharp/>Substrings vs. Spans: Efficient String Handling in C#</a></h1><div class=post-meta><span class=post-reading-time>3 min read (446 words)</span></div><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#what-are-substrings>What are Substrings?</a></li><li><a href=#what-are-spans>What are Spans?</a></li><li><a href=#benefit-of-using-spans>Benefit of Using Spans</a></li><li><a href=#when-to-use-substrings-vs-spans>When to Use Substrings vs. Spans</a></li><li><a href=#real-world-example-comparison>Real world example comparison</a></li></ul></nav></div><div class=post-content><div><p>If you’re working with strings in C#, you’ve probably encountered the need to extract substrings or manipulate portions of a string. Traditionally, you would use the Substring method to extract a portion of a string, but there&rsquo;s a newer alternative called &ldquo;spans&rdquo; that you might want to consider.</p><p>In this article, we’ll take a look at the differences between substrings and spans in C#, and discuss how you can use each approach efficiently to handle strings in your code.</p><h2 id=what-are-substrings>What are Substrings?<a href=#what-are-substrings class=hanchor arialabel=Anchor>&#8983;</a></h2><p>A substring is a portion of a string that you extract using the Substring method in C#.</p><p>Here’s an example of how you would extract a substring from a string in C#:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>string</span> originalString = <span style=color:#e6db74>&#34;The quick brown fox jumps over the lazy dog&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>string</span> substring = originalString.Substring(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>); <span style=color:#75715e>// == quick</span>
</span></span></code></pre></div><p>In this example, we’re extracting a substring starting at index 4 and with a length of 5 characters. The resulting substring variable will contain the text &ldquo;quick&rdquo;.</p><h2 id=what-are-spans>What are Spans?<a href=#what-are-spans class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Spans are a newer alternative to substrings in C#. They provide a more efficient way to manipulate strings.</p><p>A span is essentially a “view” of a portion of a larger array or string, without actually creating a new instance of that portion. This means that you can manipulate the data in the span without affecting the original data.</p><p>Here’s an example of how you would create a span in C#:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>string</span> originalString = <span style=color:#e6db74>&#34;The quick brown fox jumps over the lazy dog&#34;</span>;
</span></span><span style=display:flex><span>ReadOnlySpan&lt;<span style=color:#66d9ef>char</span>&gt; span = originalString.AsSpan(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>); <span style=color:#75715e>// == quick</span>
</span></span></code></pre></div><p>In this example, we’re creating a read-only span that starts at index 4 and has a length of 5 characters. The resulting span variable will contain the same text (quick) as the substring variable from the previous example.</p><h2 id=benefit-of-using-spans>Benefit of Using Spans<a href=#benefit-of-using-spans class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Because spans are essentially “views” of a portion of a larger array or string, they don’t create new instances of that data. This means that using spans can be much more efficient than using substrings, especially when dealing with large strings.</p><h2 id=when-to-use-substrings-vs-spans>When to Use Substrings vs. Spans<a href=#when-to-use-substrings-vs-spans class=hanchor arialabel=Anchor>&#8983;</a></h2><p>While spans are generally more efficient than substrings, there are still some cases where substrings might be more appropriate. For example, if you’re working with a small string or only need to extract a single substring, the performance benefits of using spans might not be significant enough to justify the additional complexity.</p><h2 id=real-world-example-comparison>Real world example comparison<a href=#real-world-example-comparison class=hanchor arialabel=Anchor>&#8983;</a></h2><p>I’ve created an example benchmark console application, which you can run for your own knowledge. Below you can see an example result of the benchmark.</p><p><img src=substrings-are-fast.webp alt="Substrings are fast"></p><p>You can see is that the ReplaceSpan method is roughly 40% faster. Moreover, the allocated memory is more than 50 percent less.</p></div></div></article></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>Merijn Geurts</span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>